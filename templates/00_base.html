<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}AUTO UPBIT 실전 대시보드{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card-title { font-weight: 700; font-size: 1.1rem; }
    .main-bg { background: linear-gradient(135deg,#222831 65%,#1a232e 100%); }
    .toggle-switch { position: relative; width: 56px; height: 32px; display: inline-block; }
    .toggle-switch input { display: none; }
    .toggle-slider {
      position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
      background: #334155; border-radius: 32px; transition: background 0.2s;
      display: flex; align-items: center; justify-content: space-between; padding: 0 7px;
      font-weight: bold; font-size: 15px; color: #b1c1db;
    }
    .toggle-slider .icon { font-size: 17px; }
    .toggle-switch input:checked + .toggle-slider {
      background: #22c55e; color: #fff;
    }
    .toggle-slider .toggle-dot {
      position: absolute; top: 4px; left: 4px; width: 24px; height: 24px; border-radius: 100%;
      background: #fff; box-shadow: 0 2px 10px #0f172a2a;
      transition: left 0.22s;
    }
    .toggle-switch input:checked + .toggle-slider .toggle-dot {
      left: 28px; background: #fff;
    }
    th, td { white-space: nowrap; }
    .td-coin { min-width: 64px; }
    .td-strategy { min-width: 110px; }
    .td-price { min-width: 100px; text-align: right; }
    .td-graph { min-width: 220px; }
    .td-pnl { min-width: 75px; text-align: right; }
    .td-burn, .td-add { min-width: 48px; text-align: center; }
    ::-webkit-scrollbar { height:6px; width:6px; background:#2d3748; }
    ::-webkit-scrollbar-thumb { background: #475569; border-radius:3px; }
    .tooltip { position: relative; display: inline-block; cursor: pointer; }
    .tooltip .tooltiptext {
      visibility: hidden; width: max-content; min-width: 110px; background: #374151;
      color: #fff; text-align: center; border-radius: 7px; padding: 6px 10px; position: absolute; z-index: 20;
      bottom: 130%; left: 50%; transform: translateX(-50%);
      opacity: 0; transition: opacity 0.18s; font-size: 0.93rem; pointer-events: none;
      box-shadow: 0 6px 22px #1119;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body class="main-bg text-white min-h-screen font-sans">
  <header class="bg-gray-950 border-b border-green-500/20 shadow-lg sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-3">
      <div class="flex items-center gap-3">
        <span class="text-green-400 text-2xl font-black tracking-tight">AUTO<span class="text-white">UPBIT</span></span>
        <span class="ml-2 px-2 py-0.5 rounded-full text-xs bg-green-900/50 text-green-300 font-semibold">실시간</span>
      </div>
      <nav class="flex gap-6 text-base font-semibold">
        <a href="{{ url_for('dashboard') }}" class="hover:text-green-400 transition">대시보드</a>
        <a href="{{ url_for('strategy') }}" class="hover:text-green-400 transition">전략 설정</a>
        <a href="{{ url_for('risk') }}" class="hover:text-green-400 transition">리스크 셋팅</a>
        <a href="{{ url_for('analysis') }}" class="hover:text-green-400 transition">데이터 분석</a>
        <a href="{{ url_for('settings') }}" class="hover:text-green-400 transition">개인 설정</a>
      </nav>
    </div>
  </header>
  <main class="max-w-7xl mx-auto px-4 py-8">
    {% block content %}{% endblock %}
  </main>
  <footer class="text-center text-gray-500 text-sm py-8 mt-10 border-t border-green-900/30 bg-gray-950">
    &copy; 2025 <span class="text-green-400 font-semibold">AUTO UPBIT</span>. All rights reserved.
  </footer>
  <script>
    function toggleStatus(checkbox) {
      var status = document.getElementById("run-status");
      var playIcon = document.getElementById("toggle-play");
      var stopIcon = document.getElementById("toggle-stop");
      if (checkbox.checked) {
        status.textContent = "실행중";
        status.className =
          "w-full px-3 py-1 rounded-full text-sm font-bold bg-green-700 text-green-200 text-center mb-1";
        playIcon.style.display = "";
        stopIcon.style.display = "none";
      } else {
        status.textContent = "정지됨";
        status.className =
          "w-full px-3 py-1 rounded-full text-sm font-bold bg-gray-700 text-gray-300 text-center mb-1";
        playIcon.style.display = "none";
        stopIcon.style.display = "";
      }
    }
    function openMonitorModal() {
      document.getElementById("monitorModal").classList.remove("hidden");
    }
    function closeMonitorModal() {
      document.getElementById("monitorModal").classList.add("hidden");
    }
    function saveMonitorCondition() {
      var minPrice = document.getElementById("minPrice").value;
      var maxPrice = document.getElementById("maxPrice").value;
      var minVolatility = document.getElementById("minVolatility").value;
      var volumeRank = document.getElementById("volumeRank").value;
      alert("저장 완료!\n\n최소 가격: " + minPrice + "\n최대 가격: " + maxPrice +
            "\n변동성 하한: " + minVolatility + "%\n거래대금 순위: Top " + volumeRank);
      closeMonitorModal();
    }
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") closeMonitorModal();
    });
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
