{% extends 'base.html' %}
{% block title %}UPBIT AutoTrading Â· ë©”ì¸ ëŒ€ì‹œë³´ë“œ{% endblock %}
{% block content %}
<style>
body { background:#f6f8fb; font-size:17px; overflow:hidden; }
.navbar { background:#1e2b45; }
.card-head {
  background:#22315a; color:#fff; font-size:1.13rem; font-weight:600;
  padding:1.05rem 1.5rem; display:flex; align-items:center; gap:.7rem; border-radius:1.1rem 1.1rem 0 0;
}
.card { border-radius:1.15rem; box-shadow:0 4px 24px #0001; }
.card-body { padding:2rem 1.6rem 1.4rem 1.6rem; }
.table th, .table td { vertical-align:middle; }
.table thead { position:sticky; top:0; z-index:2; }
.table-responsive { max-height:46vh; overflow:auto; }
#layout { display:flex; height:calc(100vh - 66px); }
#left { width:22%; min-width:300px; max-width:410px; overflow:auto; padding:1.6rem 1rem 1rem 1.4rem; }
#right { flex:1; overflow:auto; padding:1.7rem 1.8rem 1.7rem 0.5rem; }
#drag { width:7px; background:#dee2e6; cursor:col-resize; min-height:90vh; }
.badge-go   { background:#198754; font-size:.8rem; padding:.36rem .85rem; }
.badge-wait { background:#ffc107; color:#000; font-size:.8rem; padding:.36rem .85rem; }
.badge-stop { background:#dc3545; font-size:.8rem; padding:.36rem .85rem; }
.badge-sell-force { background:#dc3545; font-size:.8rem; padding:.36rem .85rem; }
.badge-sell-sl    { background:#fd7e14; color:#000; font-size:.8rem; padding:.36rem .85rem; }
.badge-sell-tp    { background:#0d6efd; font-size:.8rem; padding:.36rem .85rem; }
.badge-sell-max   { background:#20c997; font-size:.8rem; padding:.36rem .85rem; }
.badge-sell-wait  { background:#6c757d; font-size:.8rem; padding:.36rem .85rem; }
::-webkit-scrollbar { width:8px; background:#eaeaea; }
::-webkit-scrollbar-thumb { background:#d1d7e1; border-radius:5px; }
.bar-graph, .trend-bar { position:relative; height:16px; background:#e9ecef; border-radius:7px; }
.bar-graph { width:190px; margin:0 auto; }
.trend-bar { width:170px; margin:0 auto; }
.dot { position:absolute; top:50%; transform:translateY(-50%); width:15px; height:15px; border-radius:50%; }
.dot.stop { background:#dc3545; left:0; }
.dot.entry { background:#6c757d; }
.dot.take { background:#0d6efd; right:0; }
.dot.trend { z-index:2; }
.dot.green { background:#198754; }
.dot.red   { background:#dc3545; }
.dot.yellow{ background:#ffc107; }
.dot.blue  { background:#0d6efd; }
.trend-bar .tick { position:absolute; width:2px; height:70%; background:#adb5bd; top:15%; }
.trend-bar .tick1 { left:33%; }
.trend-bar .tick2 { right:33%; }
@media (max-width:1400px) {
  #left { min-width:200px; }
  #right { padding:1rem; }
}
</style>

<div id="layout">
  <!-- ì¢Œì¸¡ -->
  <div id="left">
    <div class="card shadow-sm mb-4">
      <div class="card-head">
        <i class="bi bi-robot"></i> ë´‡ ìƒíƒœ
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="í˜„ì¬ ë´‡ì˜ ìë™ë§¤ë§¤ êµ¬ë™ ìƒíƒœë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. ì‹¤í–‰ì¤‘ì´ë©´ ëª¨ë“  ì „ëµì´ ì‹¤ì‹œê°„ ë™ì‘í•©ë‹ˆë‹¤."></i>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="badge bg-success px-3">ì‹¤í–‰ì¤‘</span>
          <button class="btn btn-primary btn-sm w-50">ì¤‘ì§€í•˜ê¸°</button>
        </div>
        <small class="text-muted">ì—…ë°ì´íŠ¸: 2025-05-18 14:22</small>
      </div>
    </div>
    <div class="card shadow-sm mb-4">
      <div class="card-head">
        <i class="bi bi-wallet2"></i> ê³„ì¢Œ ìš”ì•½
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="ê±°ë˜ì†Œ ì”ê³ ì™€ ëˆ„ì  ìˆ˜ìµë¥ ì„ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."></i>
      </div>
      <div class="card-body">
        <div class="row gy-2">
          <div class="col-6">í˜„ê¸ˆ:</div><div class="col-6 text-end fw-semibold">8,500,000 ì›</div>
          <div class="col-6">ì´ ìì‚°:</div><div class="col-6 text-end fw-semibold">10,200,000 ì›</div>
          <div class="col-6">ëˆ„ì  ìˆ˜ìµë¥ :</div><div class="col-6 text-end text-success fw-semibold">+20 %</div>
        </div>
      </div>
    </div>
    <div class="card shadow-sm mb-4">
      <div class="card-head">
        <i class="bi bi-filter-square"></i> ëª¨ë‹ˆí„°ë§ ì½”ì¸ ì¡°ê±´
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="ëŒ€ì‹œë³´ë“œì— í‘œì‹œí•  ì½”ì¸ì„ ê°€ê²©Â·ì‹œì´ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§í•©ë‹ˆë‹¤."></i>
      </div>
      <div class="card-body">
        <label class="form-label">ìµœì†Œ ê°€ê²©(ì›)</label>
        <input type="number" class="form-control form-control-sm mb-2" value="700">
        <label class="form-label">ìµœëŒ€ ê°€ê²©(ì›)</label>
        <input type="number" class="form-control form-control-sm mb-2" value="23000">
        <label class="form-label">ì‹œê°€ì´ì•¡ ìˆœìœ„</label>
        <input type="number" class="form-control form-control-sm mb-3" value="20">
        <button class="btn btn-primary btn-sm w-100">ì €ì¥</button>
      </div>
    </div>
    <div class="card shadow-sm">
      <div class="card-head">
        <i class="bi bi-bell"></i> ì‹¤ì‹œê°„ ì•Œë¦¼
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="ì²´ê²°Â·ì†ì ˆÂ·ìµì ˆ ë“± ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ë¡œê·¸ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤."></i>
      </div>
      <div class="card-body small" style="max-height:140px;overflow:auto;">
        <div>[14:20] BTC ë§¤ìˆ˜ ì²´ê²° (+2.1 %)</div>
        <div>[14:05] ETH ì†ì ˆ (-2.9 %)</div>
      </div>
    </div>
  </div><!-- /left -->

  <div id="drag"></div>

  <!-- ìš°ì¸¡ -->
  <div id="right">
    <!-- ë³´ìœ ì½”ì¸ ê´€ë¦¬(ë§¤ë„ ëª¨ë‹ˆí„°ë§) + ì†ì ˆÂ·ìµì ˆ/ì¶”ì„¸ ê·¸ë˜í”„ -->
    <div class="card shadow-sm mb-5">
      <div class="card-head">
        <i class="bi bi-cash-coin"></i> ë³´ìœ ì½”ì¸ ê´€ë¦¬ (ë§¤ë„ ëª¨ë‹ˆí„°ë§)
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="í˜„ì¬ ë³´ìœ  ì¤‘ì¸ ì½”ì¸ì˜ ì†ìµ ìƒíƒœì™€ ë§¤ë„(Exit) ìš°ì„ ìˆœìœ„ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤."></i>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-bordered text-center align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>#</th><th>ì½”ì¸</th>
                <th>ì†ì ˆÂ·ìµì ˆ ê·¸ë˜í”„ <i class="bi bi-info-circle"></i></th>
                <th>ì¶”ì„¸ ì†ì ˆÂ·ìµì ˆ <i class="bi bi-info-circle"></i></th>
                <th>Sell ì‹œê·¸ë„</th>
                <th>ì•¡ì…˜</th>
              </tr>
            </thead>
            <tbody>
              <!-- ì•„ë˜ ìƒ˜í”Œ ë°ì´í„°ëŠ” ì‹¤ì œ Flask/Jinja2ì—ì„œ for loopë¡œ ë°”ê¿” ì¶œë ¥ ê°€ëŠ¥ -->
              <tr>
                <td>1</td><td>BTC</td>
                <td>
                  <div class="bar-graph">
                    <span class="dot stop"  style="left:0%"></span>
                    <span class="dot entry" style="left:48%"></span>
                    <span class="dot take"  style="right:0%"></span>
                  </div>
                </td>
                <td>
                  <div class="trend-bar">
                    <span class="tick tick1"></span>
                    <span class="tick tick2"></span>
                    <span class="dot trend green" style="left:66%"></span>
                  </div>
                </td>
                <td><span class="badge badge-sell-max">ìˆ˜ìµ ê·¹ëŒ€í™”</span></td>
                <td><button class="btn btn-sm btn-outline-danger">ìˆ˜ë™ ë§¤ë„</button></td>
              </tr>
              <!-- ì´í•˜ í‘œ ë°ì´í„° ë°˜ë³µ -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- ë§¤ìˆ˜ ëª¨ë‹ˆí„°ë§ -->
    <div class="card shadow-sm">
      <div class="card-head">
        <i class="bi bi-bullseye"></i> ë§¤ìˆ˜ ëª¨ë‹ˆí„°ë§
        <i class="bi bi-question-circle ms-auto" data-bs-toggle="tooltip"
           title="ì¶”ì„¸Â·ë³€ë™ì„±Â·ê±°ë˜ëŸ‰Â·ì²´ê²°ê°•ë„Â·ê³¨ë“ í¬ë¡œìŠ¤Â·RSIë¥¼ ì¡°í•©í•´ ë§¤ìˆ˜ ìš°ì„ ìˆœìœ„ë¥¼ í•œëˆˆì— ë³´ì—¬ì¤ë‹ˆë‹¤."></i>
        <i class="ms-2 bi bi-arrow-clockwise" role="button"
           onclick="alert('ë ˆì´ë” ìƒˆë¡œê³ ì¹¨');"
           data-bs-toggle="tooltip" title="ë°ì´í„° ìƒˆë¡œ ê³ ì¹¨"></i>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered text-center mb-0">
          <thead class="table-light"><tr>
            <th>#</th><th>ì½”ì¸</th>
            <th>ì¶”ì„¸ <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="ğŸ”¼ ìƒìŠ¹ Â· ğŸ”» í•˜ë½ Â· ğŸ”¸ ì¤‘ë¦½"></i></th>
            <th>ë³€ë™ì„±<br>(ATR%) <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="ğŸ”µ High Â· ğŸŸ¡ Mid Â· ğŸ”» Low"></i></th>
            <th>ê±°ë˜ëŸ‰(%) <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="â« í­ì¦ Â· ğŸ”¼ ì¦ê°€ Â· ğŸ”» ê°ì†Œ"></i></th>
            <th>ì²´ê²°ê°•ë„ <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="â« ê°•ë§¤ìˆ˜ Â· ğŸ”¼ ë§¤ìˆ˜ìš°ìœ„ Â· ğŸ”» ë§¤ë„ìš°ìœ„"></i></th>
            <th>GC <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="ğŸ”¼ ê³¨ë“  Â· ğŸ”» ë°ë“œ Â· ğŸ”¸ ì—†ìŒ"></i></th>
            <th>RIS <i class="bi bi-info-circle" data-bs-toggle="tooltip" title="â« ê·¹ê³¼ë§¤ë„ Â· ğŸ”¼ ê³¼ë§¤ë„ Â· ğŸ”¸ ì¤‘ë¦½ Â· ğŸ”» ê³¼ë§¤ìˆ˜"></i></th>
            <th>Buy ì‹œê·¸ë„ <i class="bi bi-info-circle" data-bs-toggle="tooltip"
                title="ê°•ì œ ë§¤ìˆ˜Â·ê´€ë§Â·íšŒí”¼Â·ë°ì´í„°ëŒ€ê¸°"></i></th>
            <th>ì•¡ì…˜</th>
          </tr></thead>
          <tbody>
            <!-- ì•„ë˜ë„ ì‹¤ì œ Flask ë°ì´í„°ì™€ for loopë¡œ ë°”ê¿” ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤ -->
            <tr><td>1</td><td>BTC</td>
              <td class="icon-cell">ğŸ”¼</td><td class="icon-cell">ğŸ”µ 5.8</td>
              <td class="icon-cell">â« 250</td><td class="icon-cell">â« 122</td>
              <td class="icon-cell">ğŸ”¼</td><td class="icon-cell">â« E</td>
              <td><span class="badge badge-go">ê°•ì œ ë§¤ìˆ˜</span></td>
              <td><button class="btn btn-sm btn-outline-success">ìˆ˜ë™ ë§¤ìˆ˜</button></td></tr>
            <!-- ì´í•˜ í‘œ ë°ì´í„° ë°˜ë³µ -->
          </tbody>
        </table>
      </div>
    </div>
  </div><!-- /right -->
</div><!-- /layout -->

<script>
document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(el=>new bootstrap.Tooltip(el));
const drag = document.getElementById('drag'), left = document.getElementById('left'); let sx, sw;
drag.addEventListener('mousedown', e => { sx = e.clientX; sw = left.offsetWidth;
  document.addEventListener('mousemove', mv); document.addEventListener('mouseup', up); });
function mv(e) { const w = sw + (e.clientX - sx), min = 260, max = window.innerWidth * 0.45; if (w > min && w < max) left.style.width = w + 'px'; }
function up() { document.removeEventListener('mousemove', mv); document.removeEventListener('mouseup', up); }
</script>
{% endblock %}
