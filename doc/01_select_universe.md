# 유니버스 선정 개편안

이 문서는 새롭게 구성될 **F1 모듈**의 코인 필터링 과정을 정리한 초안입니다. 앞으로 웹
대시보드와 연계해 모니터링 대상 코인과 머신러닝 학습용 코인을 쉽게 관리하려는 목적이
있습니다.

## 1. 모니터링 대상 코인 선택

1. ML 파이프라인의 결과물인 `f5_ml_pipeline/ml_data/10_selected/selected_strategies.json`
   파일에 `symbol` 목록이 존재하면 이를 우선 사용합니다.
2. 사용자는 웹 화면에서 각 코인을 **허용** 또는 **미허용**으로 지정할 수 있습니다.
   - 메뉴 예시: "매수대상 코인선정".
3. 허용된 코인만 실제 모니터링 대상(유니버스)으로 채택됩니다.

## 2. 데이터 수집용 코인 필터링

웹 메뉴 "데이터 수집 코인선정"에서 다음 조건을 입력받습니다.

```json
{
  "min_price": 700.0,
  "max_price": 23000.0,
  "volume_rank": 30,
  "min_24h_trade_price": 1000000000.0
}
```

이 조건에 맞는 모든 코인에 대해 1분 주기로 데이터를 수집합니다.

## 3. 수집 데이터 종류

- **1분봉(OHLCV)**: 시장, UTC/KST 시각, 시가, 고가, 저가, 종가, 누적 거래대금 등
- **호가(Orderbook)**: 매수/매도 호가 15단계와 잔량 정보
- **체결(Trades)**: 체결 시각, 가격, 수량, 체결 ID 등
- **시세(Ticker)**: 실시간 가격, 변동률, 24시간 거래량 등

## 4. 활용 목적

1. **모니터링용 데이터**
   - `selected_strategies.json`에서 선택된 코인에 한해 매수/매도 모니터링에 활용합니다.
2. **머신러닝 학습 데이터**
   - `03_feature_engineering.py`에서 기술적 지표 계산에 사용됩니다.
   - `04_labeling.py`에서 매매 신호 라벨을 생성할 때 참조합니다.

## 5. 설정 파일 구조

- `config/coin_list_monitoring.json` – 웹에서 허용으로 지정한 모니터링 대상 코인 리스트
- `config/coin_list_data_collection.json` – 데이터 수집에 사용할 코인 리스트
- `config/filter_coin_data_collection.json` – 데이터 수집 조건 값
- `f5_ml_pipeline/ml_data/10_selected/selected_strategies.json` – ML에서 추린 후보 목록

### 예시 JSON 구조

두 코인 리스트 파일은 아래와 같이 심볼 문자열 배열을 저장합니다.

```json
[
    "KRW-BTC",
    "KRW-ETH",
    "KRW-XRP"
]
```

## 추가

- 데이터 수집 스케줄은 코인 수가 많아질수록 부하가 커지므로 1분 간격 작업이 겹치지 않게 스레드 풀이나 비동기 방식을 고려합니다.
- 웹 대시보드는 단순 토글만 제공하고 실제 저장은 JSON 파일로 관리하면 버전 관리가 용이합니다.

